(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-home-dj-confirm"],{"0f9d":function(t,e,i){"use strict";i("7a82");var n=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.upvideo=e.upload=e.changeTime=void 0,i("d3b7"),i("159b"),i("14d9"),i("99af"),i("e25e");var a=n(i("4478")),o=n(i("2909")),u=(i("dbd8"),i("910e")),d="undefined"===typeof arguments?void 0:arguments,r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;d.length>0&&void 0!==d[0]&&d[0];return console.log(t),new Promise((function(e,i){uni.chooseImage({count:t,sizeType:["original","compressed"],success:function(t){uni.showLoading({title:"上传中"});var i=t.tempFilePaths,n=[];i.forEach((function(t){uni.uploadFile({url:u.baseUrl+"/api/common/upload",filePath:t,name:"file",success:function(t){uni.hideLoading();var a={img1:JSON.parse(t.data).data.fullurl,img2:JSON.parse(t.data).data.url};n.push(a),n.length==i.length&&e(n)},fail:function(){uni.showToast({title:"上传失败",icon:"none"})}})}))}})}))};e.upload=r;var s=function(){return new Promise((function(t,e){uni.chooseVideo({count:1,success:function(e){uni.showLoading({title:"上传中"});var i=e.tempFilePath;uni.uploadFile({url:u.baseUrl+"/api/common/uploadali",filePath:i,name:"file",success:function(e){if(uni.hideLoading(),console.log("ffffffffffff",e.data),"4001"==JSON.parse(e.data).code)uni.showToast({title:JSON.parse(e.data).msg,icon:"none"});else{var i={video1:JSON.parse(e.data).data.fullurl,video2:JSON.parse(e.data).data.url};t(i)}},fail:function(){uni.showToast({title:"上传失败",icon:"none"})}})}})}))};e.upvideo=s;var l=function(t){var e=(0,a.default)(Date,[t.split(" ")[0].split("-")[0],t.split(" ")[0].split("-")[1]-1,t.split(" ")[0].split("-")[2]].concat((0,o.default)(t.split(" ")[1].split(":")),["00"])),i=parseInt(e.getTime()/1e3);return i};e.changeTime=l},2909:function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,n.default)(t)||(0,a.default)(t)||(0,o.default)(t)||(0,u.default)()};var n=d(i("6005")),a=d(i("db90")),o=d(i("06c5")),u=d(i("3427"));function d(t){return t&&t.__esModule?t:{default:t}}},3427:function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},i("d9e2"),i("d401")},"35fc":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"flex flex-column vh100 w100"},[i("v-uni-view",{staticClass:"u-flex-1 w100"},[i("v-uni-map",{staticStyle:{width:"100%",height:"100%",position:"relative"},attrs:{scale:13,latitude:t.latitude,longitude:t.longitude,markers:t.covers,polyline:t.polyline}})],1),i("dtHujiao",{staticStyle:{width:"100%"},attrs:{price:t.price},on:{hujiao:function(e){arguments[0]=e=t.$handleEvent(e),t.hujiao.apply(void 0,arguments)}}})],1)},a=[]},"362f":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/* uni.scss */\n/* 颜色变量 */\n/* 边框border */.navigation[data-v-0570e03d]{position:fixed;right:%?10?%;top:%?100?%;width:%?100?%;height:%?100?%}',""]),t.exports=e},4478:function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=u,i("4ae1"),i("d3b7"),i("f8c9"),i("14d9");var n=o(i("b380")),a=o(i("d967"));function o(t){return t&&t.__esModule?t:{default:t}}function u(t,i,o){return(0,a.default)()?e.default=u=Reflect.construct.bind():e.default=u=function(t,e,i){var a=[null];a.push.apply(a,e);var o=Function.bind.apply(t,a),u=new o;return i&&(0,n.default)(u,i.prototype),u},u.apply(null,arguments)}},"4a92":function(t,e,i){"use strict";i.r(e);var n=i("35fc"),a=i("f10d");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("ea52");var u=i("f0c5"),d=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,"0570e03d",null,!1,n["a"],void 0);e["default"]=d.exports},6005:function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(Array.isArray(t))return(0,n.default)(t)};var n=function(t){return t&&t.__esModule?t:{default:t}}(i("6b75"))},"731d":function(t,e,i){var n=i("362f");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("5347379e",n,!0,{sourceMap:!1,shadowMode:!1})},ad92:function(t,e,i){"use strict";i("7a82");var n=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("14d9"),i("acd8");var a=n(i("5530")),o=i("26cb"),u=n(i("6a06")),d=i("0f9d"),r={data:function(){return{query:{},time:"",other:{},price:"",distance:"",latitude:"",longitude:"",polyline:[]}},computed:(0,a.default)((0,a.default)({},(0,o.mapState)(["start","end"])),{},{covers:function(){return[{id:1,latitude:this.latitude,longitude:this.longitude,iconPath:"../../static/now.png",title:"当前位置",width:25,height:25},{id:2,latitude:this.start.latitude,longitude:this.start.longitude,iconPath:"../../static/start.png",title:"起点位置",width:40,height:40},{id:3,latitude:this.end.latitude,longitude:this.end.longitude,iconPath:"../../static/end.png",title:"终点位置",width:40,height:40}]}}),onLoad:function(t){this.query=JSON.parse(decodeURIComponent(t.query)),"预约时间"==this.query.time?this.time="":this.time=(0,d.changeTime)(this.query.time),this.other=this.query.other;var e=this;uni.getLocation({type:"gcj02",success:function(t){e.longitude=t.longitude,e.latitude=t.latitude,e.polyline=[],e.getLine()}})},onShow:function(){},methods:{getLine:function(){var t=new u.default.AMapWX({key:"bb6f4ed802756f963b37c184ce4e9766"});this.lineData(t,this.start.longitude+","+this.start.latitude,this.end.longitude+","+this.end.latitude,"#28d32e")},lineData:function(t,e,i,n){var a=this;console.log(e),console.log(i),t.getDrivingRoute({origin:e,destination:i,success:function(t){if(t.paths&&t.paths[0]&&t.paths[0].steps)for(var e=t.paths[0].steps,i=[],o=0;o<e.length;o++)for(var u=e[o].polyline.split(";"),d=0;d<u.length;d++)i.push({longitude:parseFloat(u[d].split(",")[0]),latitude:parseFloat(u[d].split(",")[1])});a.polyline.push({points:i,color:n,width:10,arrowLine:!0}),t.paths[0]&&t.paths[0].distance&&(a.distance=t.paths[0].distance,a.getPrice(t.paths[0].distance))},fail:function(t){console.log(444444,t)}})},getPrice:function(t){var e=this;this.$http("/addons/ddrive/order/amount",{distance:t},"POST").then((function(t){e.price=t}))},hujiao:function(){this.$http("/addons/ddrive/order/create",{start:this.start.name,start_city:this.start.city,start_address:this.start.address,start_latitude:this.start.latitude,start_longitude:this.start.longitude,end:this.end.name,end_city:this.end.city,end_address:this.end.address,end_latitude:this.end.latitude,end_longitude:this.end.longitude,distance:this.distance,duration:0,mobile:this.other.tel?this.other.tel:"",appointment_time:this.time},"POST").then((function(t){uni.showToast({title:"呼叫成功"}),setTimeout((function(){uni.redirectTo({url:"/pages/home/detail?id="+t.order_id})}),100)}))}}};e.default=r},b380:function(t,e,i){"use strict";function n(t,i){return e.default=n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},n(t,i)}i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=n,i("131a")},d967:function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},i("d3b7"),i("f8c9"),i("4ae1")},db90:function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0"),i("a630")},ea52:function(t,e,i){"use strict";var n=i("731d"),a=i.n(n);a.a},f10d:function(t,e,i){"use strict";i.r(e);var n=i("ad92"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a}}]);