(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-huoyun-confirm-order"],{"2a17":function(t,e,i){"use strict";i.r(e);var a=i("43a8"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},"43a8":function(t,e,i){"use strict";i("7a82");var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("e9c4"),i("caad"),i("2532");var n=a(i("5530")),o=i("26cb"),s=a(i("6036")),u=(a(i("4310")),{data:function(){return{coupon_id:"",type:0,money:0,time:"",img:"",checked:!1,num:"请选择跟车人数",demand:"",demand_name:"是否需要搬运、返程等服务",remark:"如货物类别等",pay:"在线支付",coupon:{},iscoupon:!0,show:!1,show1:!1,value:"1",list:[{value:"1",label:"0人"},{value:"2",label:"1人"},{value:"3",label:"2人"}],show2:!1,list1:[{value:"1",label:"在线支付"},{value:"2",label:"货到付款"}],end_address:[],coupon_title:""}},computed:(0,n.default)({},(0,o.mapState)(["userInfo","address","start","hyaddress"])),components:{longDate:s.default},onLoad:function(t){var e=this;this.$store.dispatch("updateUserInfo"),this.coupon_title=this.userInfo.coupon_count+"张优惠券",this.type=t.id,this.time=t.time,this.money=t.price,this.init(),uni.$on("demand",(function(t){console.log(t),e.demand=t.demand,e.getPrice(),t.demand?t.demand.split(",").length>2?e.demand_name=t.demand_name+"等；":e.demand_name=t.demand_name:e.demand_name="是否需要搬运、返程等服务"})),uni.$on("remark",(function(t){e.remark=t.remark})),uni.$on("coupon",(function(t){console.log(t),e.coupon=t,e.coupon_title="-"+t.price,e.getPrice()}))},methods:{init:function(){var t=this;this.$http("/addons/ddrive/freight/Info",{car_id:this.type},"POST").then((function(e){t.img=e.car_image}))},getPrice:function(){var t=this;this.$http("/addons/ddrive/hyorder/amount",{start_lat:this.start.latitude,start_lng:this.start.longitude,end_address:JSON.stringify(this.hyaddress),car_id:this.type,demand:this.demand.includes("2")?1:"",coupond_id:this.coupon.id||""},"POST").then((function(e){t.money=e.distance_price})).catch((function(){t.money="--"}))},onSelectTime:function(t){console.log(t),t.tip?uni.showToast({title:t.tip,icon:"none"}):(this.time=t.time,this.show=!1)},confirm:function(t){this.num=t[0].label},confirm1:function(t){this.pay=t[0].label,"货到付款"==t[0].label?(this.iscoupon=!1,this.coupon="",this.getPrice()):(this.iscoupon=!0,this.coupon_title=this.userInfo.coupon_count+"张优惠券",this.coupon="")},goChagre:function(){uni.navigateTo({url:"/pages/huoyun/charge?id="+this.type})},goDemand:function(){uni.navigateTo({url:"/pages/huoyun/other-demand"})},goRemark:function(){uni.navigateTo({url:"/pages/huoyun/remark"})},goCoupon:function(){uni.navigateTo({url:"/pages/my/coupon/list?sf_type=2&id=''&price="+this.money})},goDetails:function(t,e){uni.navigateTo({url:"/pages/my/details?id="+t+"&title="+e})},submit:function(){var t=this,e=this.coupon.id?this.coupon.id:"";"请选择跟车人数"!=this.num?this.$http("/addons/ddrive/hyorder/create",{car_id:this.type,appointment_time:"预约"==this.time?"":this.time,people_num:this.num.split("人")[0],demand:this.demand,start_address:JSON.stringify(this.start),remark:"如货物类别等"==this.remark?"":this.remark,pay_method:"在线支付"==this.pay?1:2,mobile:this.userInfo.mobile,coupon_id:e,sh_address:JSON.stringify(this.hyaddress)},"POST").then((function(i){e&&t.$store.dispatch("updateUserInfo"),uni.showToast({title:"提交订单成功",icon:"none"}),uni.redirectTo({url:"在线支付"==t.pay?"/pages/huoyun/pay?id="+i.order_id+"&coupon_id="+t.coupon_id:"/pages/huoyun/order-detail?id="+i.order_id})})):uni.showToast({title:"请先选择跟车人数",icon:"none"})}}});e.default=u},"568d":function(t,e,i){"use strict";var a=i("f93a0"),n=i.n(a);n.a},"5fef":function(t,e,i){"use strict";i.r(e);var a=i("d548"),n=i("2a17");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("568d");var s=i("f0c5"),u=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"afc06dde",null,!1,a["a"],void 0);e["default"]=u.exports},"9f4d":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAMAAAANIilAAAAAYFBMVEUAAAD/0Sf/0Sj/0Sf/0iL/0if/0if/0Sf/0if/0SX/0if/0Sf/0if/0iT/0if/0ib/0if/0if/0Sb/0Cb/0Sf/0Sj/0if/0ib/0Sf/0Sf/0ib/0Sb/0if/0Sf/0Sf/0SiZFPcPAAAAH3RSTlMAkLTDBvba1EQddeS/E7hi6oN8JKugmWlZSz41yqVu1EcsuwAAAR9JREFUSMftk8FugzAQBV2CMTEGSkhCA0ne//9lhSq6pXa8XnJlbhaaA/O0amfnHY5DZ6dtan7FjDtucRv8UG2wLRYa+f9q/PIllR8gPmuZW+IvV1ktgxWjvBZhcnkt4pQun/Ef3ctrGSMdOy8Wo1TqRmPLarn5ZWhsUa1sfh5EY58RljEKanlykafWIlkwtoUv09hcrYgMx9WKyWi5WmGZHzsvGBmX1/IJnIyRreXL/NgZeBld2L0hRdZ9rBZxoKsC4bhadMMtFmJj9xo+VQUiMnaGVBmPSC3iqdQTAUqvlo+hYNGxBwS4z1/uCDCsZIcQJZ1KbK4CQZoGQSpPFmBW8gUckcucIGJSKzrE4C7LaiSirfKo248k2lrt7CTzDYLOhg2ilFsuAAAAAElFTkSuQmCC"},af45:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/* uni.scss */\n/* 颜色变量 */\n/* 边框border */[data-v-afc06dde] .u-primary-hover{background:linear-gradient(90deg,#00b6b4,#00d496)!important}[data-v-afc06dde] .active .u-cell__value{color:#333}[data-v-afc06dde] .active .u-cell__value{color:#333}[data-v-afc06dde] .remark .u-cell__value{margin-left:%?80?%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[data-v-afc06dde] .red .u-cell__value{color:#ea0000}.img-header[data-v-afc06dde]{height:%?100?%}.img-header uni-image[data-v-afc06dde]{width:%?100?%;height:%?100?%}.img-warning[data-v-afc06dde]{height:%?40?%}.img-warning uni-image[data-v-afc06dde]{width:%?40?%;height:%?40?%}',""]),t.exports=e},d548:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var a={uCellItem:i("d829").default,uRadioGroup:i("75fc").default,uRadio:i("c26c").default,uButton:i("93c3").default,uPopup:i("cb7f").default,uSelect:i("ddd8").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"bt"},[a("v-uni-view",{staticClass:"flex plr-36 ptb-20"},[a("v-uni-view",{staticClass:"bold"},[t._v(t._s(1==t.type?"小面":2==t.type?"中面":3==t.type?"依维柯":4==t.type?"中货":5==t.type?"5米2":"6米8"))]),a("v-uni-view",{staticClass:"img-header"},[a("v-uni-image",{attrs:{src:t.img,mode:"aspectFill"}})],1)],1),a("v-uni-view",{staticStyle:{height:"20rpx",background:"#F8F8F8"}}),a("v-uni-view",{staticClass:"plr-36 ptb-30"},[a("v-uni-view",{staticClass:"flex1 flex-middle"},[a("v-uni-view",{},[a("v-uni-view",{staticClass:"bg-green",staticStyle:{width:"16rpx",height:"16rpx","border-radius":"50%"}})],1),a("v-uni-view",{staticClass:"ml-20"},[t._v(t._s(t.start.name))])],1),t._l(t.hyaddress,(function(e,i){return a("v-uni-view",{key:i,staticClass:"flex1 flex-middle mt-30"},[a("v-uni-view",{},[a("v-uni-view",{staticClass:"bg-orange",staticStyle:{width:"16rpx",height:"16rpx","border-radius":"50%"}})],1),a("v-uni-view",{staticClass:"ml-20 u-flex-1 flex"},[a("v-uni-view",{},[t._v(t._s(e.address.name))]),a("v-uni-view",{},[t._v(t._s(e.floor))])],1)],1)}))],2),a("v-uni-view",{staticStyle:{height:"20rpx",background:"#F8F8F8"}}),a("v-uni-view",{},[a("v-uni-view",{staticClass:"active",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.show=!0}}},[a("u-cell-item",{attrs:{title:"用车时间",value:"预约"==t.time?"现在用车":t.time}})],1),a("v-uni-view",{staticClass:"active"},[a("u-cell-item",{attrs:{title:"联系电话",value:t.userInfo.mobile,arrow:!1}})],1),a("v-uni-view",{class:["请选择跟车人数"==t.num?"":"active"]},[a("u-cell-item",{attrs:{title:"跟车人数(必填)",value:t.num},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.show1=!0}}})],1)],1),a("v-uni-view",{staticStyle:{height:"20rpx",background:"#F8F8F8"}}),a("v-uni-view",{},[a("v-uni-view",{class:[t.demand?"active":""]},[a("u-cell-item",{attrs:{title:"额外需求",value:t.demand_name},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goDemand.apply(void 0,arguments)}}})],1),a("v-uni-view",{class:["如货物类别等"==t.remark?"":"active","remark"]},[a("u-cell-item",{attrs:{title:"订单备注",value:t.remark},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goRemark.apply(void 0,arguments)}}})],1)],1),a("v-uni-view",{staticStyle:{height:"20rpx",background:"#F8F8F8"}}),a("v-uni-view",{staticClass:"active"},[a("u-cell-item",{attrs:{title:"支付方式",value:t.pay},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.show2=!0}}}),t.iscoupon?a("u-cell-item",{staticClass:"red",attrs:{title:"优惠券",value:t.coupon_title},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goCoupon.apply(void 0,arguments)}}}):t._e()],1),a("v-uni-view",{staticClass:"plr-36 pt-30",staticStyle:{background:"#F8F8F8","padding-bottom":"420rpx"}},[a("v-uni-view",{staticClass:"flex1 flex-middle"},[a("u-radio-group",{attrs:{"active-color":"#00C28E"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.radioGroupChange.apply(void 0,arguments)}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("u-radio",{attrs:{name:"1",ch:!0,"label-disabled":!1}})],1),a("v-uni-view",{},[t._v("我已阅读并同意"),a("v-uni-text",{staticClass:"green",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goDetails(18,"货物托运居间服务协议")}}},[t._v("《货物托运居间服务协议》")])],1)],1)],1),a("v-uni-view",{staticClass:"fixed-bottom"},[a("v-uni-view",{staticClass:"size-26 center plr-36",staticStyle:{height:"60rpx",background:"rgba(0,194,142,.3)"}},[a("v-uni-view",{staticClass:"green"},[t._v("若产生高速费、停车费和搬运费，请用户额外支付")]),a("v-uni-view",{staticClass:"img-warning"},[a("v-uni-image",{attrs:{src:i("9f4d"),mode:""}})],1)],1),a("v-uni-view",{staticClass:"bg-white"},[a("v-uni-view",{staticClass:"center ptb-35"},[a("v-uni-text",{staticClass:"red size-26 bold"},[t._v("￥")]),a("v-uni-text",{staticClass:"red size-40 bold"},[t._v(t._s(t.money))]),a("v-uni-text",{staticClass:"ml-10",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goChagre.apply(void 0,arguments)}}},[t._v("费用标准")])],1),a("v-uni-view",{staticClass:"mlr-36 pb-35"},[a("u-button",{attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v("确认叫车")])],1)],1)],1),a("u-popup",{attrs:{mode:"bottom",height:"400"},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.show=!1}},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("longDate",{attrs:{type:"day",openStatus:!0,getDayNum:3,chooesMaxDay:3},on:{select:function(e){arguments[0]=e=t.$handleEvent(e),t.onSelectTime.apply(void 0,arguments)}}})],1),a("u-select",{attrs:{list:t.list},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}},model:{value:t.show1,callback:function(e){t.show1=e},expression:"show1"}}),a("u-select",{attrs:{list:t.list1},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm1.apply(void 0,arguments)}},model:{value:t.show2,callback:function(e){t.show2=e},expression:"show2"}})],1)},o=[]},f93a0:function(t,e,i){var a=i("af45");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("61b6f278",a,!0,{sourceMap:!1,shadowMode:!1})}}]);