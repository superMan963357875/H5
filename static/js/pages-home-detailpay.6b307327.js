(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-home-detailpay"],{"0ef9":function(t,i,n){var e=n("fdbb");e.__esModule&&(e=e.default),"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var a=n("4f06").default;a("59af1d09",e,!0,{sourceMap:!1,shadowMode:!1})},"52ef":function(t,i,n){"use strict";var e=n("0ef9"),a=n.n(e);a.a},"67cb":function(t,i,n){"use strict";n("7a82");var e=n("4ea4").default;Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,n("caad"),n("2532"),n("14d9"),n("acd8");var a=e(n("6a06")),o={data:function(){return{id:"",info:{},timer1:null,arr1:[0,1,2,4,5,3],arr2:[-2,-1,99],arr3:[1,2,3,4,5,99],ispay:!1,latitude:"",longitude:"",polyline:[]}},computed:{covers:function(){return[{id:1,latitude:this.latitude,longitude:this.longitude,iconPath:"../../static/now.png",title:"当前位置",width:25,height:25},{id:2,latitude:this.info.start_latitude,longitude:this.info.start_longitude,iconPath:"../../static/start.png",title:"起点位置",width:40,height:40},{id:3,latitude:this.info.end_latitude,longitude:this.info.end_longitude,iconPath:"../../static/end.png",title:"终点位置",width:40,height:40}]}},onLoad:function(t){this.id=t.id},onShow:function(){this.init()},onUnload:function(){clearInterval(this.timer1)},onHide:function(){clearInterval(this.timer1)},methods:{init:function(){var t=this,i=this;this.$http("/addons/ddrive/order/info",{order_id:this.id},"POST").then((function(n){t.info=n,uni.setNavigationBarTitle({title:n.status_text}),t.arr1.includes(1*t.info.status)&&(t.timer1=setInterval((function(){t.update()}),5e3)),uni.getLocation({type:"gcj02",success:function(t){console.log("当前位置的经度1："+t.longitude),console.log("当前位置的纬度1："+t.latitude),i.longitude=t.longitude,i.latitude=t.latitude,i.polyline=[],i.getLine()}})}))},update:function(){var t=this;this.$http("/addons/ddrive/order/info",{order_id:this.id},"POST").then((function(i){t.info=i,t.arr2.includes(1*t.info.status)&&clearInterval(t.timer1)}))},getLine:function(){var t=new a.default.AMapWX({key:"4212e2ed80856520bc1a2e44153333fc"});["0","1","5","4"].includes(this.info.status)&&(this.lineData(t,this.longitude+","+this.latitude,this.info.start_longitude+","+this.info.start_latitude,"#ff4b4e"),this.lineData(t,this.info.start_longitude+","+this.info.start_latitude,this.info.end_longitude+","+this.info.end_latitude,"#28d32e")),2==this.info.status&&(this.lineData(t,this.info.start_longitude+","+this.info.start_latitude,this.longitude+","+this.latitude,"#c6c6c5"),this.lineData(t,this.longitude+","+this.latitude,this.info.end_longitude+","+this.info.end_latitude,"#28d32e"));["-2","-1","3","99"].includes(this.info.status)&&this.lineData(t,this.info.start_longitude+","+this.info.start_latitude,this.info.end_longitude+","+this.info.end_latitude,"#28d32e")},lineData:function(t,i,n,e){var a=this;t.getDrivingRoute({origin:i,destination:n,success:function(t){if(t.paths&&t.paths[0]&&t.paths[0].steps)for(var i=t.paths[0].steps,n=[],o=0;o<i.length;o++)for(var s=i[o].polyline.split(";"),d=0;d<s.length;d++)n.push({longitude:parseFloat(s[d].split(",")[0]),latitude:parseFloat(s[d].split(",")[1])});a.polyline.push({points:n,color:e,width:10,arrowLine:!0})},fail:function(t){console.log(444444,t)}})},toNav:function(t){var i=this;uni.getSystemInfo({success:function(n){console.log(n.platform),"android"==n.platform?2==t?plus.runtime.openURL("androidamap://navi?sourceApplication=ddcar&lat="+i.info.end_latitude+"&lon="+i.info.end_longitude+"&dev=0&style=2"):plus.runtime.openURL("androidamap://navi?sourceApplication=appname&lat="+i.info.start_latitude+"&lon="+i.info.start_longitude+"&dev=0&style=2"):"ios"==n.platform&&(2==t?plus.runtime.openURL("iosamap://navi?sourceApplication=ddcar&lat="+i.info.end_latitude+"&lon="+i.info.end_longitude+"&dev=0&style=2"):plus.runtime.openURL("iosamap://navi?sourceApplication=appname&lat="+i.info.start_latitude+"&lon="+i.info.start_longitude+"&dev=0&style=2"))}})},toAnquan:function(){uni.navigateTo({url:"/pages/home/security"})}}};i.default=o},"6c12":function(t,i,n){"use strict";n.r(i);var e=n("67cb"),a=n.n(e);for(var o in e)["default"].indexOf(o)<0&&function(t){n.d(i,t,(function(){return e[t]}))}(o);i["default"]=a.a},"8bc4":function(t,i,n){"use strict";n.d(i,"b",(function(){return e})),n.d(i,"c",(function(){return a})),n.d(i,"a",(function(){}));var e=function(){var t=this,i=t.$createElement,n=t._self._c||i;return t.info.status?n("v-uni-view",{staticClass:"flex flex-column vh100 w100"},[n("v-uni-view",{staticClass:"u-flex-1 w100",staticStyle:{height:"10%"}},[n("v-uni-map",{staticStyle:{width:"100%",height:"100%"},attrs:{scale:12,latitude:t.latitude,longitude:t.longitude,markers:t.covers,polyline:t.polyline}})],1),n("dtPay",{staticClass:"w100",attrs:{info:t.info},on:{update:function(i){arguments[0]=i=t.$handleEvent(i),t.update.apply(void 0,arguments)},close:function(i){arguments[0]=i=t.$handleEvent(i),t.ispay=!1}}})],1):t._e()},a=[]},9489:function(t,i,n){"use strict";n.r(i);var e=n("8bc4"),a=n("6c12");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(i,t,(function(){return a[t]}))}(o);n("52ef");var s=n("f0c5"),d=Object(s["a"])(a["default"],e["b"],e["c"],!1,null,"8ddb6032",null,!1,e["a"],void 0);i["default"]=d.exports},fdbb:function(t,i,n){var e=n("24fb");i=e(!1),i.push([t.i,'@charset "UTF-8";\n/* uni.scss */\n/* 颜色变量 */\n/* 边框border */.navigation[data-v-8ddb6032]{position:fixed;right:%?10?%;top:%?100?%;width:%?100?%;height:%?100?%}',""]),t.exports=i}}]);